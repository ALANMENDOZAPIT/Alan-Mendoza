<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestión de Inventario de la Soda</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .product-container { margin: 20px; display: inline-block; border: 1px solid #ccc; padding: 15px; }
        .product-container h3 { margin: 0; }
        #login-form, #admin-panel { display: none; }
        .hidden { display: none; }
        .visible { display: block; }
        #inventory-table, #sales-history { margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Gestión de Inventario de la Soda</h1>
    
    <!-- Formulario de Inicio de Sesión -->
    <div id="login-form">
        <h2>Iniciar Sesión</h2>
        <input type="text" id="username" placeholder="Usuario"><br><br>
        <input type="password" id="password" placeholder="Contraseña"><br><br>
        <button onclick="login()">Iniciar Sesión</button>
    </div>

    <!-- Panel de Administración -->
    <div id="admin-panel">
        <h2>Panel de Administración</h2>
        <button onclick="showAddProductForm()">Añadir Producto</button>
        <button onclick="viewSalesHistory()">Ver Historial de Ventas</button>
        <div id="add-product-form" class="hidden">
            <h3>Añadir Producto</h3>
            <input type="text" id="new-product-name" placeholder="Nombre del Producto"><br><br>
            <input type="number" id="new-product-stock" placeholder="Stock Inicial"><br><br>
            <button onclick="addProduct()">Guardar Producto</button>
        </div>
        <div id="sales-history" class="hidden">
            <h3>Historial de Ventas</h3>
            <table id="sales-table" border="1">
                <tr>
                    <th>ID de Empleado</th>
                    <th>Producto</th>
                    <th>Cantidad</th>
                </tr>
            </table>
        </div>
        <br><br>
        <button onclick="logout()">Cerrar Sesión</button>
    </div>

    <!-- Vista de Productos -->
    <div id="products" class="hidden">
        <h2>Inventario de Productos</h2>
        <div id="products-container"></div>
    </div>
    
    <script>
        // Lista de productos
        let products = [
            { id: 1, name: "Gaseosa 500ml", stock: 20, url: "https://example.com/product/1" },
            { id: 2, name: "Chips de Papas", stock: 15, url: "https://example.com/product/2" },
            { id: 3, name: "Agua Mineral", stock: 30, url: "https://example.com/product/3" }
        ];
        
        let salesHistory = []; // Historial de ventas
        
        // Mostrar u ocultar formularios
        document.getElementById("login-form").style.display = "block";

        // Simulación de autenticación
        function login() {
            const username = document.getElementById("username").value;
            const password = document.getElementById("password").value;

            // Usuario y contraseña predeterminados
            if (username === "admin" && password === "1234") {
                document.getElementById("login-form").style.display = "none";
                document.getElementById("admin-panel").style.display = "block";
                document.getElementById("products").style.display = "block";
                displayProducts();
            } else {
                alert("Usuario o contraseña incorrectos.");
            }
        }

        // Cerrar sesión
        function logout() {
            document.getElementById("admin-panel").style.display = "none";
            document.getElementById("login-form").style.display = "block";
            document.getElementById("products").style.display = "none";
        }

        // Mostrar productos con códigos QR
        function displayProducts() {
            const productsContainer = document.getElementById("products-container");
            productsContainer.innerHTML = ""; // Limpiar contenedor

            products.forEach(product => {
                const productDiv = document.createElement("div");
                productDiv.classList.add("product-container");

                productDiv.innerHTML = `
                    <h3>${product.name}</h3>
                    <p>Stock: ${product.stock}</p>
                    <div id="qrcode-${product.id}"></div>
                `;

                productsContainer.appendChild(productDiv);

                // Crear el código QR con la URL del producto
                new QRCode(document.getElementById(`qrcode-${product.id}`), {
                    text: product.url,
                    width: 128,
                    height: 128
                });
            });
        }

        // Añadir nuevo producto al inventario
        function addProduct() {
            const productName = document.getElementById("new-product-name").value;
            const productStock = parseInt(document.getElementById("new-product-stock").value);

            if (productName && productStock) {
                const newProduct = {
                    id: products.length + 1,
                    name: productName,
                    stock: productStock,
                    url: `https://example.com/product/${products.length + 1}`
                };
                products.push(newProduct);
                displayProducts();
                alert("Producto añadido con éxito.");
                document.getElementById("add-product-form").classList.add("hidden");
            } else {
                alert("Por favor, completa todos los campos.");
            }
        }

        // Mostrar el historial de ventas
        function viewSalesHistory() {
            const salesTable = document.getElementById("sales-table");
            salesTable.innerHTML = `
                <tr>
                    <th>ID de Empleado</th>
                    <th>Producto</th>
                    <th>Cantidad</th>
                </tr>
            `;
            
            salesHistory.forEach(sale => {
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${sale.employeeId}</td>
                    <td>${sale.product}</td>
                    <td>${sale.quantity}</td>
                `;
                salesTable.appendChild(row);
            });

            document.getElementById("sales-history").classList.remove("hidden");
        }

        // Mostrar/ocultar el formulario de agregar producto
        function showAddProductForm() {
            document.getElementById("add-product-form").classList.toggle("hidden");
        }
    </script>
</body>
</html>
